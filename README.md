# Calut POS (Flutter)

Flutter 기반으로 구현한 호프집 POS 애플리케이션입니다. 테이블 주문 관리, 메뉴 설정, 날짜별 매출 확인, 테이블 배치 편집 기능을 제공합니다.

## 주요 특징
- 상단 탭 구조로 **메인**, **매출**, **설정** 화면을 전환합니다.
- 메인 화면은 실제 배치와 유사한 테이블 카드를 `Stack` 위에 표시하고, 주문 요약과 총액을 실시간으로 보여줍니다.
- 테이블을 누르면 주문 다이얼로그가 열려 카테고리 탭과 큰 메뉴 버튼으로 한 번에 수량을 추가할 수 있으며, 주문 내역에서는 `+`/`-` 버튼으로 수량을 조절합니다.
- 결제 시 매출 테이블에 주문 데이터를 기록하고 해당 날짜의 매출 통계를 캘린더와 함께 확인할 수 있습니다.
- 설정 탭에서 메뉴/카테고리를 추가·수정·삭제하고, 테이블 수 및 좌표를 편집할 수 있습니다.

## 필수 도구
- Flutter 3.13 이상 (Dart 3.2 이상)

## 실행 방법
```bash
flutter pub get
flutter run -d windows # 혹은 macos, linux, chrome 등 지원 플랫폼
```

### Windows용 실행 파일 빌드

1. Flutter SDK에서 Windows Desktop 타깃을 활성화한 뒤(Windows 환경) 다음 스크립트를 실행합니다. `windows/` 러너 폴더가 없으면 스크립트가 자동으로 생성합니다.
   ```powershell
   ./scripts/build_windows_release.ps1
   ```
2. `build/windows/x64/runner/Release/calut_pos.exe` 파일이 생성되며, 바로가기를 바탕화면에 등록하면 더블 클릭으로 실행할 수 있습니다.
3. **Windows 러너 설정(예: 매니페스트, CMake 옵션 등)을 수정했다면 변경 사항이 포함된 실행 파일을 얻기 위해 위 스크립트를 다시 실행해야 합니다.** 기존 빌드 산출물은 수정 사항을 자동으로 반영하지 않습니다.
4. 아이콘과 버전 정보는 `windows/runner` 폴더에서 커스터마이즈할 수 있습니다.

## 테스트
단위 및 위젯 테스트는 `flutter test`로 실행할 수 있습니다.

```bash
flutter test
```

## 데이터베이스 초기화
애플리케이션은 최초 실행 시 `sqflite`와 `path_provider`를 사용하여 로컬 디렉터리에 `pos.sqlite3` 데이터베이스를 생성합니다. 기본 테이블 배치와 샘플 카테고리/메뉴를 자동으로 시드합니다.

## 수동 QA 체크리스트
1. 앱을 실행하면 메인 탭에서 커다란 테이블 카드가 밝은 톤의 그리드 위에 표시되고, 마우스를 올리면 상세 주문 팝오버가 나타나는지 확인합니다.
2. 주문 다이얼로그에서 주문 항목이 추가될 때마다 "몇 분 전 추가" 문구가 갱신되는지 확인하고, 하단의 저장/결제 버튼이 올바르게 동작하는지 검증합니다.
3. 매출 탭에서 각 매출 항목의 `수정` 버튼을 눌러 총액/결제 수단/마감 시각을 변경할 수 있고 저장 후 목록과 합계가 즉시 갱신되는지 확인합니다.
4. Windows에서 `scripts/build_windows_release.ps1` 스크립트를 실행하면 `build/windows/x64/runner/Release/calut_pos.exe` 파일이 생성되어 더블 클릭으로 실행 가능한지 확인합니다.
5. 설정 탭에서 메뉴와 카테고리를 추가·수정·삭제하면 메인 탭 및 주문 다이얼로그에 즉시 반영되는지 확인합니다.
6. 테이블 배치 편집 모드를 활성화하고 드래그로 위치를 조정한 뒤 저장하면 다음 실행 시에도 새로운 배치가 유지되는지 확인합니다.
